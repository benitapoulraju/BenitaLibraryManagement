IF NOT EXISTS (SELECT name FROM sys.databases WHERE name = 'LibraryDB')
BEGIN
    CREATE DATABASE LibraryDB;
END


USE LibraryDB;


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Books')
BEGIN
    CREATE TABLE  Books (
    BookId INT PRIMARY KEY IDENTITY NOT NULL,
    Title NVARCHAR(100) NOT NULL,
    Author NVARCHAR(100) NOT NULL,
    Genre NVARCHAR(50)  NULL,
    AvailableCopies INT NULL
);
END;


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'BorrowedBooks')
BEGIN
CREATE TABLE BorrowedBooks (
    BorrowId INT PRIMARY KEY IDENTITY NOT NULL,
    BookId INT FOREIGN KEY REFERENCES Books(BookId) NULL,
    UserId INT FOREIGN KEY REFERENCES Users(UserId) NULL,
    BorrowedDate DATETIME DEFAULT GETDATE() NULL,
    ReturnDate DATETIME NULL,
    ReturnStatus BIT NULL,
);
END;


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Users')
BEGIN

CREATE TABLE  Users (
    UserId INT PRIMARY KEY IDENTITY NOT NULL,
    UserName NVARCHAR(100) NOT NULL,
    Email NVARCHAR(100) NULL
);
END;


